-- create database bank;
use bank;
-- create table Branch(branch_name varchar(50),branch_city varchar(50),branch_asset int,primary key(branch_name));
-- create table Customer(customer_name varchar(20),customer_street varchar(50),customer_city varchar(50),primary key(customer_name));
-- create table Loan(loan_no int,branch_name varchar(50),amount numeric(8,2),primary key(loan_no));
-- create table Borrower(customer_name varchar(20),loan_no int,primary key(customer_name,loan_no));
-- create table Account(account_no int,branch_name varchar(50),balance numeric(8,2),primary key(account_no));
-- create table Depositer(customer_name varchar(20),account_no int,primary key(customer_name,account_no));
-- 
alter table Loan add constraint foreign key Loan(branch_name) references Branch(branch_name);
alter table Account add constraint foreign key Account(branch_name) references Branch(branch_name);
alter table Borrower add constraint foreign key Borrower(customer_name) references Customer(customer_name);
alter table Depositer add constraint foreign key Depositer(customer_name) references Customer(customer_name);
alter table Borrower add constraint foreign key Borrower(loan_no) references Loan(loan_no);
alter table Depositer add constraint foreign key Depositer(account_no) references Account(account_no);
desc Loan;
desc Account;

insert into Branch values('Mundakkayam','Kottayam',1000000),('varakkara','Trissur',2000000),('Guruvayoor','Thrissur',13000000),('Harison','Ernakulam',50000000),('Kozhikode','Kozhikode',6000000);
insert into Branch values('Valayanchirangara','Ernakulam',80000000);
insert into Branch values('mgrod','chenai',300000);
desc Branch;
select * from Branch;
insert into Customer values('Divya P','Murikkumvayal','Mundakkayam'),('Sunil','Mundakkayam','Kanjirappally'),('Amal','palayam','Trivandrum'),('Smith','palayam','Trivandrum'),('Meera','eastfort','Trivandrum');
insert into Customer values('Faber Castell','Harrison','America');
insert into Customer values('Hema','ashcourt','Harison');
select * from Customer;
insert into Loan values(001,'Mundakkayam',10000.20),(002,'varakkara',20000.34),(003,'Guruvayoor',15000.65),(004,'Harison',50000.50),(005,'Harison',55000);
insert into Loan values(006,'Valayanchirangara',0.0);
insert into Loan values(007,'mgrod',45000);
select * from Loan;
insert into Borrower values('Divya P',001),('Sunil',002),('Amal',003),('Smith',004),('Meera',005);
insert into Borrower values('Faber Castell',006);
insert into Borrower values('Hema',007);
select * from Borrower;
insert into Account values(1234,'Mundakkayam',5000),(1235,'varakkara',500),(1236,'Guruvayoor',2500.80),(1237,'Harison',2000),(1238,'Harison',3000);
insert into Account values(1239,'Valayanchirangara',20000);
insert into Account values(12356,'mgrod',15000);
select * from Account;
insert into Depositer values('Divya P',1234),('Sunil',1235),('Amal',1236),('Smith',1237),('Meera',1238);
insert into Depositer values('Hema',12356);
insert into Depositer values('Faber Castell',1239);
select * from Depositer;
select Customer.customer_name from Customer inner join Loan inner join Borrower on Borrower.customer_name = Customer.customer_name and Loan.loan_no = Borrower.loan_no where amount=0;

select customer_name from Customer  where customer_street='palayam' and customer_city='Trivandrum' ;
#select c.customer_name,a.branch_name from Customer c inner join Depositer d inner join Account a on a.account_no=d.account_no and c.customer_name =d.customer_name where customer_city = 'Harrison';
#select branch_name from Branch where customer_city = (select customer_city from Customer where customer_city='Harison');
select Account.branch_name,Customer.customer_name from Account ,Customer,Depositer where Depositer.account_no = Account.account_no and Depositer.customer_name=Customer.customer_name and customer_city='Harison'; 